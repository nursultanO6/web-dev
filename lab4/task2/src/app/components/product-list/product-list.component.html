<div class="page-wrapper">

  <!-- ── TOP HEADER ── -->
  <header class="top-header">
    <div class="top-header-inner">
      <a href="https://kaspi.kz" target="_blank" class="logo">
        <img src="data:image/png;base64,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" alt="Kaspi" class="logo-img" />
        <span class="logo-text">Kaspi.kz</span>
      </a>
      <nav class="top-nav">
        <a href="#" class="top-nav-link">Client</a>
        <a href="#" class="top-nav-link">Business</a>
        <a href="#" class="top-nav-link">Kaspi Guide</a>
      </nav>
    </div>
  </header>

  <div class="search-bar-row">
    <div class="search-bar-inner">
      <div class="search-tab">Store</div>

      <div class="search-box">
        <label for="search" class="visually-hidden">Search products</label>
        <input
          id="search"
          type="text"
          [(ngModel)]="searchQuery"
          (input)="filterProducts()"
          placeholder="Search by product name..."
          class="search-input"
        />
        <button class="search-btn" (click)="filterProducts()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
        </button>
      </div>

      <div class="city-block">
        <span class="city-label">My City:</span>
        <a href="#" class="city-link">Almaty</a>
      </div>
    </div>
  </div>

  <!-- ── CATEGORY NAV ── -->
  <nav class="cat-nav">
    <div class="cat-nav-inner">
      <button
        *ngFor="let cat of categories"
        class="cat-nav-btn"
        [class.active]="activeCategory === cat.key"
        (click)="setCategory(cat.key)"
      >{{ cat.label }}</button>
    </div>
  </nav>

  <!-- ── MAIN CONTENT ── -->
  <div class="main-content">

    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title-row">
          <span class="sidebar-title">All categories</span>
          
        </div>
        <ul class="sidebar-list">
          <li
            *ngFor="let cat of sidebarCategories"
            class="sidebar-item"
            [class.active]="activeCategory === cat.key"
            (click)="setCategory(cat.key)"
          >
            {{ cat.label }}
            <span class="sidebar-item-count">({{ cat.count }})</span>
          </li>
        </ul>
      </div>

      <!-- Price Filter -->
      <div class="sidebar-section price-section">
        <div class="sidebar-title-row">
          <span class="sidebar-title">Price</span>
        </div>
        <div class="price-inputs">
          <input type="number" [(ngModel)]="minPrice" placeholder="от" class="price-input" />
          <span class="price-dash">—</span>
          <input type="number" [(ngModel)]="maxPrice" placeholder="до" class="price-input" />
        </div>
      </div>

      <!-- Rating Filter -->
      <div class="sidebar-section">
        <div class="sidebar-title-row">
          <span class="sidebar-title">Rating</span>
        </div>
        <div class="rating-filters">
          <label *ngFor="let r of [5,4,3]" class="rating-filter-item">
            <input type="radio" name="rating" [value]="r" [(ngModel)]="minRating" />
            <span class="mini-stars">
              <span *ngFor="let s of [1,2,3,4,5]" [class.on]="s <= r">★</span>
            </span>
            <span class="rating-filter-text">and up</span>
          </label>
          <label class="rating-filter-item">
            <input type="radio" name="rating" [value]="0" [(ngModel)]="minRating" />
            <span class="rating-filter-text">All</span>
          </label>
        </div>
      </div>
    </aside>

    <!-- Products Section -->
    <section class="products-section">

      <!-- Breadcrumb + Sort -->
      <div class="products-top-bar">
        <div class="breadcrumb">
          <a href="#" class="bc-link">Kaspi Store</a>
          <span class="bc-arrow">→</span>
          <span class="bc-current">{{ activeCategoryLabel }}</span>
        </div>
        <div class="sort-row">
          <select [(ngModel)]="sortBy" class="sort-select">
            <option value="default">Popular</option>
            <option value="price-asc">Price: ascending</option>
            <option value="price-desc">Price: descending</option>
            <option value="rating">Rating</option>
          </select>
        </div>
      </div>

      <!-- Results info -->
      <div class="results-info" *ngIf="searchQuery">
        Found: <strong>{{ filteredProducts.length }}</strong> results for "{{ searchQuery }}"
      </div>

      <!-- Grid -->
      <div class="products-grid" *ngIf="filteredProducts.length > 0; else noResults">
        <app-product-card
          *ngFor="let product of filteredProducts"
          [product]="product"
        ></app-product-card>
      </div>

      <!-- Empty state (Task 2 requirement) -->
      <ng-template #noResults>
        <div class="no-results">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQaWsSzat-NO-bDdKdXGYJe1hED-wOK1U_UAg&s" alt="loop">
          <p>No products found</p>
          <button (click)="resetFilters()">Reset filters</button>
        </div>
      </ng-template>

    </section>
  </div>

</div>